upstream ruoyi-apps {
    # 如果不写负载均衡模式，默认使用轮询
    hash $cookie_JSESSIONID consistent;
    server localhost:8080;
    server localhost:8088;
}

server {
    listen 8004 ssl;
    server_name localhost;
    ssl_certificate     /Users/Zhuanz/sync/code/nginx-learning/https/server.crt;
    ssl_certificate_key /Users/Zhuanz/sync/code/nginx-learning/https/server.key;
    ssl_protocols       TLSv1 TLSv1.1 TLSv1.2;
    ssl_ciphers         HIGH:!aNULL:!MD5;
    ssl_password_file   /Users/Zhuanz/sync/code/nginx-learning/https/cert.pass;

    ssl_session_cache   shared:SSL:10m;
    ssl_session_timeout 10m;

    location / {
        proxy_pass http://ruoyi-apps;
    }


    location = /ie.html {
        root /Users/Zhuanz/sync/code/nginx-learning/www;
    }
    location ^~ /fonts/ {
        root /Users/Zhuanz/sync/code/nginx-learning/www;
    }
    location ~ \.(css|js|png|jpg|gif|ico) {
        root /Users/Zhuanz/sync/code/nginx-learning/www;
    }
}